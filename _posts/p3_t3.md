## Direct Illumination 

### Uniform Sampling on Hemisphere

Given a `hit_p` point, we sample a direction uniformly at random on the hemisphere. We shoot a ray in that direction and find the light emission which may be zero if the intersection point is not a light source. We do this `ns_area_light  * num_lights` times and compute a Monte Carlo estimate. The equation is given by $\frac{1}{N}\sum_{i=1}^N \frac{\text{bsdf sample}_i \cdot \text{radiance}_i \cdot cos(\theta)}{\text{pdf}_i}$ where $\theta$ is the angle between the normal of `hit_p` and the ray direction.

### Importance Sampling on Light Sources

To importance sample, we first iterate through the light sources. If the light source is a point light source, we take one sample because there is a direct line from the the light source to the point of interest. On the other hand, if the light source is an area light, we average across `ns_area_light` samples. Another point of optimization is checking to see if the object is behind the light by transforming the ray direction to object coordinates. If the z-coordinate is negative, we can short circuit. 

To actually calculate the lighting from the lights, we sample a direction, pdf, and radiance using the `sample_L` function. The Monte Carlo estimator we use is $\frac{1}{N}\sum_{i=1}^N \frac{\text{bsdf sample}_i \cdot \text{radiance}_i \cdot cos(\theta)}{\text{pdf}_i}$. 

To account for floating point precision errors, we offset the `min_t` attribute of the ray so we don't intersect a surface multiple times. We also offset the `max_t` attribute of the ray to detect if there is another object blocking the light. We can shoot a ray at the light and if there is no intersection, we can conclude there is no object obstructing the view of the light. 